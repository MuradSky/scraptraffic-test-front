(()=>{"use strict";const t={$forms:null,autoResizeTextarea(t,e){if(""===e)return t.style.maxHeight=null,void(t.style.height=null);t.style.height="auto",t.style.height=`${t.scrollHeight}px`,t.style.maxHeight="auto",t.style.maxHeight=`${t.scrollHeight}px`},bindTextarea(e){const i=DOM.find(e,'[data-selector="form.textarea"]');i&&e.addEventListener("input",(e=>{"TEXTAREA"===e.target.tagName&&t.autoResizeTextarea(i,e.target.value)}))},bindEvents(t){},init(){this.$forms=DOM.select('[data-selector="form"]',!0),this.$forms?.length&&this.$forms.forEach((e=>{t.bindEvents(e),t.bindTextarea(e)}))}},e=t,i={instances:{},config:(t="default",e={})=>({slidesPerView:1,spaceBetween:16,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar",draggable:!0},slidesPerView:4,breakpoints:{320:{slidesPerView:1},576:{slidesPerView:1.8},768:{slidesPerView:2.5},992:{slidesPerView:3},1200:{slidesPerView:4}},...e}),init(t,e="default",s={}){if(!t)return;const n=i.config(e,s),a=new Swiper(t,n),o=t.dataset.sliderId||Date.now();return this.instances[o]=a,a},getInstance(t){return this.instances[t]},updateConfig(t,e){const i=this.getInstance(t);i&&(Object.assign(i.params,e),i.update())},initAll(){const t=DOM.select(".m-carousel",!0);t&&t.length>0&&t.forEach((t=>{this.init(t,t.dataset.items)}))}},s=i,n={$nav:null,$button:null,$content:null,toggleMenu(t){t.stopPropagation(),this.$content.classList.toggle("is-active"),this.$button.classList.toggle("is-active")},closeMenu(){this.$content.classList.contains("is-active")&&(this.$content.classList.remove("is-active"),this.$button.classList.remove("is-active"))},bindEvents(){this.$button&&this.$button.addEventListener("click",this.toggleMenu.bind(this)),document.addEventListener("click",(t=>{this.$nav&&!this.$nav.contains(t.target)&&this.closeMenu()}))},init(){this.$nav=DOM.select('[data-selector="nav"]'),this.$nav&&(this.$button=DOM.find(this.$nav,'[data-action="show.nav"]'),this.$content=DOM.find(this.$nav,'[data-selector="nav.content"]'),this.$button&&this.$content?(this.$button instanceof NodeList&&(this.$button=this.$button[0]),this.$content instanceof NodeList&&(this.$content=this.$content[0]),this.bindEvents()):console.warn("Ошибка: $button или $content не найдены"))}},a={handleInput(t){const e=t.target.value.trim(),i=t.target.parentNode.querySelector('[data-selector="search.button"]');e.length>0?i.classList.add("is-clear"):i.classList.remove("is-clear")},handleClear(t){const e=t.currentTarget,i=e.closest('[data-selector="search.container"]').querySelector('[data-selector="search.input"]');i.value="",e.classList.remove("is-clear"),i.focus()},bindEvents(t){const e=t.querySelector('[data-selector="search.input"]'),i=t.querySelector('[data-selector="search.button"]');e.addEventListener("input",this.handleInput.bind(this)),i.addEventListener("click",this.handleClear.bind(this))},init(){const t=document.querySelectorAll('[data-selector="search.container"]');t.length&&t.forEach((t=>{this.bindEvents(t)}))}},{select:o,find:c,addClass:l,removeClass:r,findAll:d}=DOM,h={fancyItems:[],showFancy(t){Fancybox.show([...this.fancyItems],{Toolbar:{display:{left:[],right:["close"]}},Thumbs:{type:"classic"},startIndex:t,mainClass:"gallery-fancy-show"})},initGallery(t){if(!t)return;const e=c(t,".m-gallery-thumbs"),i=c(t,".m-gallery-main");if(!e||!i)return;const s=new Swiper(e,{slidesPerView:4,spaceBetween:10,freeMode:!0,watchSlidesProgress:!0,direction:"horizontal",loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{spaceBetween:10,slidesPerView:3,direction:"vertical"}},on:{slideChange(t){t.isEnd?l(e,"is_end"):r(e,"is_end")}}});Array.from(d(e,".swiper-slide")).forEach(((t,e)=>{t.addEventListener("click",(i=>{s.slideTo(e),"thumbs.video"===t.dataset.action&&this.showFancy(e)}))}));const n=new Swiper(i,{slidesPerView:1,spaceBetween:10,thumbs:{swiper:s},breakpoints:{768:{spaceBetween:20}}}),a=t.dataset.sliderId||Date.now();"undefined"==typeof Sliders&&(window.Sliders={instances:{}}),Sliders.instances[a]={main:n,thumbs:s}},bindFancyBox(t){const e=d(t,"[data-fancybox]"),i=[];Array.from(e).forEach(((t,e)=>{t.addEventListener("click",(t=>{t.preventDefault(),this.showFancy(e)})),i.push({src:t.getAttribute("href")})})),this.fancyItems=i},initAll(){const t=o(".m-gallery",!0);t&&t.length>0&&t.forEach((t=>{this.initGallery(t),this.bindFancyBox(t)}))}},u=h,g={changeCount(t,e){const i="inc"===e?DOM.prev(t):DOM.next(t),s=+i.value;"dec"===e&&s>=i.min&&(i.value=s-1),"inc"===e&&s<i.max&&(i.value=s+1)},validateMinMax(t){const e=parseInt(t.min,10)||0,i=parseInt(t.max,10)||1/0;let s=parseInt(t.value,10)||0;s<e&&(t.value=e),s>i&&(t.value=i)},changeInput(t){t.value=t.value.replace(/\D/g,""),g.validateMinMax(t)},initHandler(){document.addEventListener("click",(function(t){const e=t.target,i=e.closest('[data-action="counter.inc"]'),s=e.closest('[data-action="counter.dec"]');i&&g.changeCount(i,"inc"),s&&g.changeCount(s,"dec")})),document.addEventListener("input",(function(t){const e=t.target;"counter.input"===e.dataset.action&&g.changeInput(e)}))},init(){document.querySelector('[data-selector="counter"]')&&this.initHandler()}},v=g,{removeClass:b,find:f,next:m,parent:p,siblings:w,hasClass:y,addClass:E}=DOM,$={card:null,bindVideo(t){const e=t.closest('[data-aciton="product.card.video"]');e&&Fancybox.show([{src:e.dataset.href}])},bindValumes(t){const e=t.closest('[data-action="check.button"]');e&&!y(e,"is_active")&&([...w(p(e))].forEach((t=>{b(f(t,"button"),"is_active")})),E(e,"is_active"))},bindAddButton(t){const e=t.closest('button[data-action="add.button"]'),i=t.closest('button[data-action="get.manage"]');e&&(E(e,"is_hidden"),b(m(e),"is_hidden")),i&&Fancybox.show([{src:"#madal-contact-manager",type:"inline"}])},bindHandler(){document.addEventListener("click",(t=>{this.bindValumes(t.target),this.bindAddButton(t.target),this.bindVideo(t.target)}))},init(){document.querySelector('[data-selector="product.card"]')&&this.bindHandler()}},x={init(){const t=document.querySelectorAll('select[data-selector="select.field"]');t&&t.forEach((t=>{new SlimSelect({select:t,settings:{showSearch:!1}})}))}},{select:L,find:C,toggleClass:_,parent:M,next:S,addClass:V,removeClass:D}=DOM,k={filter:null,bindToggle(){const t=C(this.filter,'[data-action="catalog.filter.toggle"]');t&&t.addEventListener("click",(()=>{_(this.filter,"is_show")}))},bindSearch(){const t=C(this.filter,'[data-selector="search.input"]'),e=C(this.filter,'[data-action="catalog.filter.empty"]'),i=Array.from(S(M(t)).children);console.log(i),t.addEventListener("input",(t=>{const s=t.target.value.trim().toLowerCase();let n=!1;i.forEach((t=>{t.dataset.item.toLowerCase().includes(s)?(D(t,"is_hide"),n=!0):V(t,"is_hide")})),e.style.display=n?"none":"block"}))},bindHead(){const t=C(this.filter,'[data-action="catalog.filter.head"]'),e=C(this.filter,'[data-action="catalog.filter.body"]');t&&e&&t.addEventListener("click",(()=>{_(t,"is_show"),_(e,"is_show")}))},init(){const t=L('[data-selector="catalog.filter"]');t&&(this.filter=t,this.bindHead(),this.bindSearch(),this.bindToggle())}},{select:T,addClass:A,removeClass:H,toggleClass:I,next:O,prev:P}=DOM,B={view:null,bindToggleView(){const t=T('[data-selector="catalog"]');this.view.addEventListener("click",(e=>{const i=e.target,s=i.closest('[data-action="catalog.view.list"]'),n=i.closest('[data-action="catalog.view.grid"]');s&&(A(s,"is_active"),H(O(s),"is_active"),A(t,"is_list")),n&&(A(n,"is_active"),H(P(n),"is_active"),H(t,"is_list"))}))},init(){const t=T('[data-selector="catalog.view"]');t&&(this.view=t,this.bindToggleView())}},F=B,{select:q,hasClass:N,removeClass:z,addClass:R,siblings:G}=DOM,j={root:null,bindValumes(t){const e=t.closest('[data-select="card.detail.attribute"] button');e&&!N(e,"is_active")&&([...G(e)].forEach((t=>{z(t,"is_active")})),R(e,"is_active"))},bindVideo(t){const e=t.closest('[data-action="card.detail.video"]');e&&Fancybox.show([{src:e.dataset.href}])},bindHandler(){this.root.addEventListener("click",(t=>{this.bindVideo(t.target),this.bindValumes(t.target)}))},init(){const t=q('[data-selector="card.detail"]');t&&(this.root=t,this.bindHandler())}},{select:X,siblings:J,addClass:K,removeClass:Q}=DOM,U={root:null,bindTab(t){const e=t.closest("button[data-tab]");if(e){const t=e.dataset.tab,i=X(`[data-content="${t}"]`);Q(J(e),"is_active"),K(e,"is_active"),Q(J(i),"is_show"),K(i,"is_show")}},bindHandler(){this.root.addEventListener("click",(t=>{const e=t.target;this.bindTab(e)}))},init(){const t=X('[data-selector="product.details"]');t&&(this.root=t,this.bindHandler())}};n.init(),a.init(),s.initAll(),$.init(),F.init(),x.init(),v.init(),u.initAll(),e.init(),k.init(),j.init(),U.init()})();